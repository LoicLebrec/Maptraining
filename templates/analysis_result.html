{% extends "base.html" %}

{% block title %}RÃ©sultat de l'Analyse - Maptraining{% endblock %}

{% block content %}
<h2>ğŸ“Š Analyse de l'EntraÃ®nement</h2>
<p style="color: #666; margin-bottom: 30px;">
    Voici le rÃ©sumÃ© dÃ©taillÃ© de votre entraÃ®nement
</p>

<div class="card">
    <h3>ğŸ¯ MÃ©triques Principales</h3>
    <div class="stats">
        <div class="stat-box">
            <div class="value">{{ analysis.distance_km }}</div>
            <div class="label">Distance (km)</div>
        </div>
        <div class="stat-box">
            <div class="value">{{ analysis.duration_hours }}</div>
            <div class="label">DurÃ©e (heures)</div>
        </div>
        <div class="stat-box">
            <div class="value">{{ analysis.avg_speed_kmh }}</div>
            <div class="label">Vitesse Moy. (km/h)</div>
        </div>
        <div class="stat-box">
            <div class="value">{{ analysis.avg_pace_min_per_km }}</div>
            <div class="label">Allure (min/km)</div>
        </div>
    </div>
</div>

<div class="card">
    <h3>â›°ï¸ DÃ©nivelÃ© et IntensitÃ©</h3>
    <div class="stats">
        <div class="stat-box">
            <div class="value">{{ analysis.elevation_gain_m }}</div>
            <div class="label">DÃ©nivelÃ© Positif (m)</div>
        </div>
        <div class="stat-box">
            <div class="value">{{ analysis.intensity|capitalize }}</div>
            <div class="label">IntensitÃ©</div>
        </div>
        <div class="stat-box">
            <div class="value">{{ analysis.training_load }}</div>
            <div class="label">Charge d'EntraÃ®nement</div>
        </div>
    </div>
</div>

{% if analysis.recommendations %}
<div class="card" style="background: #d4edda;">
    <h3>ğŸ’¡ Recommandations</h3>
    <ul style="margin-left: 30px; line-height: 2;">
        {% for recommendation in analysis.recommendations %}
        <li>{{ recommendation }}</li>
        {% endfor %}
    </ul>
</div>
{% endif %}

{% if map_html %}
<div class="card">
    <h3>ğŸ—ºï¸ Visualisation du Parcours</h3>
    <div style="margin-top: 15px;">
        {{ map_html|safe }}
    </div>
</div>
{% endif %}

<div class="card">
    <h3>ğŸ“ˆ InterprÃ©tation de l'IntensitÃ©</h3>
    <div style="margin-top: 15px;">
        {% if analysis.intensity == 'easy' %}
        <p><strong>Facile:</strong> Sortie de rÃ©cupÃ©ration ou endurance de base. Parfait pour la rÃ©cupÃ©ration active et le dÃ©veloppement de l'endurance fondamentale.</p>
        {% elif analysis.intensity == 'moderate' %}
        <p><strong>ModÃ©rÃ©:</strong> Rythme d'entraÃ®nement standard. Bon Ã©quilibre entre dÃ©veloppement de l'endurance et stress physiologique.</p>
        {% elif analysis.intensity == 'hard' %}
        <p><strong>Difficile:</strong> EntraÃ®nement intense. DÃ©veloppe la puissance et l'endurance spÃ©cifique. NÃ©cessite une rÃ©cupÃ©ration adÃ©quate.</p>
        {% elif analysis.intensity == 'intense' %}
        <p><strong>Intense:</strong> Effort maximal ou proche du maximum. Excellente sÃ©ance pour amÃ©liorer la performance, mais exige une rÃ©cupÃ©ration importante.</p>
        {% endif %}
    </div>
</div>

<div class="card">
    <h3>ğŸ“Š Charge d'EntraÃ®nement (TSS-like)</h3>
    <p>
        Votre charge d'entraÃ®nement est de <strong>{{ analysis.training_load }}</strong> points.
    </p>
    <div style="margin-top: 10px;">
        {% if analysis.training_load < 50 %}
        <p>ğŸŸ¢ Charge lÃ©gÃ¨re - RÃ©cupÃ©ration rapide (moins de 24h)</p>
        {% elif analysis.training_load < 100 %}
        <p>ğŸŸ¡ Charge modÃ©rÃ©e - RÃ©cupÃ©ration 24-48h recommandÃ©e</p>
        {% elif analysis.training_load < 200 %}
        <p>ğŸŸ  Charge importante - RÃ©cupÃ©ration 48-72h nÃ©cessaire</p>
        {% else %}
        <p>ğŸ”´ Charge trÃ¨s importante - RÃ©cupÃ©ration complÃ¨te (3-7 jours)</p>
        {% endif %}
    </div>
</div>

<div style="text-align: center; margin-top: 30px;">
    <a href="{{ url_for('analyze_training') }}" class="btn">Analyser un Autre EntraÃ®nement</a>
    <a href="{{ url_for('generate_route') }}" class="btn btn-secondary" style="margin-left: 10px;">
        GÃ©nÃ©rer un Nouveau Parcours
    </a>
</div>
{% endblock %}
